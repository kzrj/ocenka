(this.webpackJsonpocenka=this.webpackJsonpocenka||[]).push([[0],{141:function(e,t,a){e.exports=a(318)},16:function(e,t,a){"use strict";a.r(t),a.d(t,"AuthTypes",(function(){return d})),a.d(t,"INITIAL_STATE",(function(){return b})),a.d(t,"AuthSelectors",(function(){return p})),a.d(t,"loginRequest",(function(){return m})),a.d(t,"loginSuccess",(function(){return g})),a.d(t,"loginFailure",(function(){return f})),a.d(t,"logoutRequest",(function(){return h})),a.d(t,"logoutSuccess",(function(){return E})),a.d(t,"logoutFailure",(function(){return v})),a.d(t,"checkTokenRequest",(function(){return j})),a.d(t,"checkTokenSuccess",(function(){return O})),a.d(t,"checkTokenFail",(function(){return k})),a.d(t,"reducer",(function(){return T}));var n,r=a(7),c=a(46),o=a(69),s=a.n(o),i=Object(c.createActions)({loginRequest:["data"],loginSuccess:["user"],loginFailure:["error"],logoutRequest:null,logoutSuccess:null,logoutFailure:["error"],checkTokenRequest:["payload"],checkTokenSuccess:["payload"],checkTokenFail:["error"]}),l=i.Types,u=i.Creators,d=l;t.default=u;var b=s()({fetching:!1,user:null,error:"",isLoggedIn:!1,isLoggingIn:!1}),p={getUser:function(e){return e.user}},m=function(e,t){t.data;return e.merge({fetching:!0,user:null,isLoggingIn:!0,isLoggedIn:!1})},g=function(e,t){var a=t.user;return e.merge({fetching:!1,error:null,user:a,isLoggedIn:!0,isLoggingIn:!1})},f=function(e,t){var a=t.error;return e.merge({fetching:!1,error:a,user:null,isLoggedIn:!1,isLoggingIn:!1})},h=function(e){return e.merge({fetching:!0,isLoggingIn:!0})},E=function(e){return e.merge({fetching:!1,error:null,user:null,isLoggingIn:!1,isLoggedIn:!1})},v=function(e,t){var a=t.error;return e.merge({fetching:!1,error:a,isLoggingIn:!1})},j=function(e,t){t.payload;return e.merge({fetching:!0})},O=function(e,t){var a=t.payload;return e.merge({fetching:!1,error:null,user:a.profile,isLoggedIn:!0,isLoggingIn:!1})},k=function(e,t){var a=t.error;return e.merge({fetching:!1,error:a,user:null,isLoggedIn:!1,isLoggingIn:!1})},T=Object(c.createReducer)(b,(n={},Object(r.a)(n,l.LOGIN_REQUEST,m),Object(r.a)(n,l.LOGIN_SUCCESS,g),Object(r.a)(n,l.LOGIN_FAILURE,f),Object(r.a)(n,l.CHECK_TOKEN_REQUEST,j),Object(r.a)(n,l.CHECK_TOKEN_FAIL,k),Object(r.a)(n,l.CHECK_TOKEN_SUCCESS,O),Object(r.a)(n,l.LOGOUT_REQUEST,h),Object(r.a)(n,l.LOGOUT_SUCCESS,E),Object(r.a)(n,l.LOGOUT_FAILURE,v),n))},318:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(67),o=a.n(c),s=a(37),i=a(15),l=a(18),u=a(13),d=a(137),b=a(139),p=a(12),m=a.n(p),g=a(5),f=a(32),h=a.n(f),E="".concat("https://svoyaeda.su","/api"),v={JWT_AUTH:"".concat(E,"/jwt/api-token-auth/"),JWT_CHECK_TOKEN:"".concat(E,"/jwt/api-token-verify/"),SIGNUP:"".concat(E,"/users/"),GET_JOBS:"".concat(E,"/jobs/"),getJobDetail:function(e){return"".concat(E,"/jobs/").concat(e,"/")},activateDeactivateJobDetail:function(e){return"".concat(E,"/jobs/").concat(e,"/activate_deactivate/")},CREATE_FIRST_JOB:"".concat(E,"/jobs/first_create/"),GET_CATEGORIES:"".concat(E,"/categories/")},j=function(e){if(e&&"undefined"!==typeof e.response){var t={status:e.response.status,statusText:e.response.statusText,message:null,response:e.response};if("message"in e.response.data)t.message=JSON.stringify(e.response.data.message);else{var a="";for(var n in e.response.data)a+="".concat(n,": ").concat(e.response.data[n],". ");t.message=a}return t}return{status:"Connection Error",statusText:"An error occurred while sending your data!",message:"An error occurred while sending your data!"}},O=function(e){var t=new URLSearchParams;return null!=e&&Object.keys(e).forEach((function(a){null===e[a]||e[a]instanceof Array||t.append(a,e[a]),null!==e[a]&&e[a]instanceof Array&&(delete t[a],e[a].map((function(e){return""!==e&&t.append(a,e),null})))})),t},k=function(){return{logIn:function(e){var t=e.username,a=e.password;return h.a.post(v.JWT_AUTH,{username:t,password:a}).then((function(e){if(e.status<200||e.status>=300)throw new Error(e);return{token:e.data.token,user:e.data.user}})).catch((function(e){throw new Error(e.response.data[Object.keys(e.response.data)[0]][0])})).then((function(e){return localStorage.setItem("token",e.data.token),e.user}))},checkToken:function(e){return h.a.post(v.JWT_CHECK_TOKEN,{token:e}).then((function(e){return localStorage.setItem("token",e.data.token),localStorage.setItem("user_id",e.data.profile.id),e.data})).catch((function(e){var t=new Error(e);throw t.data=j(e),t}))},logOut:function(){localStorage.removeItem("token")}}},T=function(){return{getJobs:function(e){var t=O(e);return h.a.get(v.GET_JOBS,{params:t}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=j(e),t}))},getCategories:function(e){var t=O(e);return h.a.get(v.GET_CATEGORIES,{params:t}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=j(e),t}))},getJobDetail:function(e){localStorage.getItem("token");var t=v.getJobDetail(e);return h()({method:"get",url:t}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=j(e),t}))},createFirstJob:function(e){var t=e.name,a=e.phone,n=e.title,r=e.description,c=e.budget,o=e.address,s=e.start_date,i=e.end_date,l=e.category,u=localStorage.getItem("token")||"",d=v.CREATE_FIRST_JOB,b=new FormData;return b.append("name",t),b.append("phone",a),b.append("title",n),b.append("description",r),b.append("budget",c),b.append("address",o),b.append("category",l),s&&b.append("start_date",s),i&&b.append("end_date",i),h()({method:"post",url:d,data:b,headers:{"content-type":"multipart/form-data",Authorization:"JWT ".concat(u)}}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=j(e),t}))},partialUpdateJob:function(e){var t=e.id,a=e.title,n=e.description,r=e.budget,c=e.address,o=e.start_date,s=e.end_date,i=e.category,l=localStorage.getItem("token")||"",u=v.getJobDetail(t),d=new FormData;return a&&d.append("title",a),n&&d.append("description",n),r&&d.append("budget",r),c&&d.append("address",c),i&&d.append("category",i),o&&d.append("start_date",o),s&&d.append("end_date",s),h()({method:"patch",url:u,data:d,headers:{"content-type":"multipart/form-data",Authorization:"JWT ".concat(l)}}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=j(e),t}))},activateDeactivateJob:function(e){var t=e.id,a=e.active,n=localStorage.getItem("token")||"",r=v.activateDeactivateJobDetail(t),c=new FormData;return c.append("active",a),h()({method:"post",url:r,data:c,headers:{"content-type":"multipart/form-data",Authorization:"JWT ".concat(n)}}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=j(e),t}))},createJob:function(e){var t=e.title,a=e.description,n=e.budget,r=e.address,c=e.start_date,o=e.end_date,s=e.category,i=localStorage.getItem("token")||"",l=v.GET_JOBS,u=new FormData;return u.append("title",t),u.append("description",a),u.append("budget",n),u.append("address",r),u.append("category",s),c&&u.append("start_date",c),o&&u.append("end_date",o),h()({method:"post",url:l,data:u,headers:{"content-type":"multipart/form-data",Authorization:"JWT ".concat(i)}}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=j(e),t}))}}},_=a(16),J=a(8),y=m.a.mark(D),S=m.a.mark(F),C=m.a.mark(I);function D(e,t){var a,n;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=t.data,r.next=3,Object(g.c)(_.default.resetAuthErrors());case 3:return r.prev=3,r.next=6,Object(g.b)(e.logIn,a);case 6:return n=r.sent,r.next=9,Object(g.c)(_.default.loginSuccess(n));case 9:return r.next=11,Object(g.c)(_.default.toggleModal(!1));case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(3),r.next=17,Object(g.c)(_.default.loginFailure(r.t0.message));case 17:case"end":return r.stop()}}),y,null,[[3,13]])}function F(e,t){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(g.b)(e.logOut);case 3:return t.next=5,Object(g.c)(_.default.logoutSuccess());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(g.c)(_.default.logoutFailure(t.t0.message));case 11:case"end":return t.stop()}}),S,null,[[0,7]])}function I(e,t){var a,n;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=t.payload,r.prev=1,r.next=4,Object(g.b)(e.checkToken,a);case 4:return n=r.sent,r.next=7,Object(g.c)(_.default.checkTokenSuccess(n));case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),r.next=13,Object(g.c)(_.default.checkTokenFail(r.t0.message));case 13:case"end":return r.stop()}}),C,null,[[1,9]])}var R=m.a.mark(q),N=m.a.mark(G),A=m.a.mark(z),L=m.a.mark(B),w=m.a.mark(Q),x=m.a.mark(M),U=m.a.mark(V);function q(e,t){var a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(g.b)(e.getJobs,t.payload);case 3:return a=n.sent,n.next=6,Object(g.c)(J.default.getJobsSuccess(a));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(g.c)(J.default.getJobsFail(n.t0));case 12:case"end":return n.stop()}}),R,null,[[0,8]])}function G(e,t){var a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(g.b)(e.getJobDetail,t.payload);case 3:return a=n.sent,n.next=6,Object(g.c)(J.default.getJobDetailSuccess(a));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(g.c)(J.default.getJobDetailFail(n.t0));case 12:case"end":return n.stop()}}),N,null,[[0,8]])}function z(e,t){var a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(g.b)(e.getCategories,t.payload);case 3:return a=n.sent,n.next=6,Object(g.c)(J.default.getCategoriesSuccess(a.results));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(g.c)(J.default.getCategoriesFail(n.t0));case 12:case"end":return n.stop()}}),A,null,[[0,8]])}function B(e,t){var a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(g.b)(e.createFirstJob,t.payload);case 3:return a=n.sent,n.next=6,Object(g.c)(J.default.createFirstJobSuccess(a));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(g.c)(J.default.createFirstJobFail(n.t0));case 12:case"end":return n.stop()}}),L,null,[[0,8]])}function Q(e,t){var a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(g.b)(e.partialUpdateJob,t.payload);case 3:return a=n.sent,n.next=6,Object(g.c)(J.default.partialUpdateJobSuccess(a));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(g.c)(J.default.partialUpdateJobFail(n.t0));case 12:case"end":return n.stop()}}),w,null,[[0,8]])}function M(e,t){var a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(g.b)(e.activateDeactivateJob,t.payload);case 3:return a=n.sent,n.next=6,Object(g.c)(J.default.activateDeactivateJobSuccess(a));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(g.c)(J.default.activateDeactivateJobFail(n.t0));case 12:case"end":return n.stop()}}),x,null,[[0,8]])}function V(e,t){var a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(g.b)(e.createJob,t.payload);case 3:return a=n.sent,n.next=6,Object(g.c)(J.default.createJobSuccess(a));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(g.c)(J.default.createJobFail(n.t0));case 12:case"end":return n.stop()}}),U,null,[[0,8]])}var K=m.a.mark(H),P=k(),W=T();function H(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.a)([Object(g.d)(_.AuthTypes.LOGIN_REQUEST,D,P),Object(g.d)(_.AuthTypes.LOGOUT_REQUEST,F,P),Object(g.d)(_.AuthTypes.CHECK_TOKEN_REQUEST,I,P),Object(g.d)(J.JobsTypes.GET_JOBS_REQUEST,q,W),Object(g.d)(J.JobsTypes.GET_JOB_DETAIL_REQUEST,G,W),Object(g.d)(J.JobsTypes.GET_CATEGORIES_REQUEST,z,W),Object(g.d)(J.JobsTypes.CREATE_FIRST_JOB_REQUEST,B,W),Object(g.d)(J.JobsTypes.PARTIAL_UPDATE_JOB_REQUEST,Q,W),Object(g.d)(J.JobsTypes.ACTIVATE_DEACTIVATE_JOB_REQUEST,M,W),Object(g.d)(J.JobsTypes.CREATE_JOB_REQUEST,V,W)]);case 2:case"end":return e.stop()}}),K)}var X=a(321),Y=Object(u.combineReducers)({auth:a(16).reducer,jobs:a(8).reducer,form:X.a}),Z=a(22),$=a(23),ee=a(25),te=a(24);function ae(e){var t=e.job;return r.a.createElement("div",{className:"job-block"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},r.a.createElement("a",{href:"",className:"job-title"},t.title)),r.a.createElement("div",{className:"col-4"},r.a.createElement("p",{className:"job-budget"},t.budget,"\u0440"))),r.a.createElement("p",{className:"job-description"},t.description),r.a.createElement("p",{className:"job-address"},t.address),t.start_date?r.a.createElement("p",{className:"job-address"},"c ",t.start_date," \u0434\u043e ",t.end_date):t.end_date?r.a.createElement("p",{className:"job-address"},"\u0414\u043e ",t.end_date):r.a.createElement("p",{className:"job-address"},"\u0412 \u043b\u044e\u0431\u043e\u0435 \u0432\u0440\u0435\u043c\u044f"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("p",{className:"job-zakazchik"},t.zakazchik)),r.a.createElement("div",{className:"col-6"},r.a.createElement("p",{className:"job-created-ago"},t.created_ago))))}function ne(e){var t=e.categories;return r.a.createElement("div",{className:"block-categories"},t.length>0&&t.map((function(e){return r.a.createElement("div",{className:"btn-category",key:e.id},e.ru_name)})),r.a.createElement("div",{className:"clearfix"}))}var re=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Z.a)(this,a),(n=t.call(this,e)).state={},n}return Object($.a)(a,[{key:"componentDidMount",value:function(){this.props.getJobs()}},{key:"render",value:function(){var e=this.props.state.jobs,t=e.jobs,a=e.categories,n=e.listFetching;e.errorList;return r.a.createElement("div",{className:"container-fluid "},r.a.createElement("div",{className:""},r.a.createElement("div",{className:"block-subscription"},r.a.createElement("button",{className:"btn"},"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f")),r.a.createElement(ne,{categories:a}),r.a.createElement("div",{className:"jobs-block"},n&&r.a.createElement("p",null,"Loading..."),t.length>0&&t.map((function(e){return r.a.createElement(ae,{job:e,key:e.id})})))))}}]),a}(n.Component),ce=Object(l.b)((function(e){return{notifications:e.notifications,state:e}}),(function(e){return{getCategories:function(t){return e(J.default.getCategoriesRequest(t))},getJobs:function(t){return e(J.default.getJobsRequest(t))}}}))(re),oe=a(26),se=a(17),ie=a(7),le=a(320),ue=a(319),de=function(e){var t=e.input,a=e.label,n=e.placeholder,c=e.type,o=e.meta,s=o.touched,i=o.error,l=o.warning;return r.a.createElement("div",null,r.a.createElement("label",null,a),r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,{placeholder:n,type:c,className:"form-control"})),s&&(i&&r.a.createElement("span",null,i)||l&&r.a.createElement("span",null,l))))};function be(e){e.handleSubmit,e.pristine,e.reset,e.submitting;var t=e.categories,a=e.setData,n=e.job,c=e.jobDate;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(le.a,{component:de,name:"title",type:"text",label:"\u0427\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c?"})),r.a.createElement("div",null,r.a.createElement("label",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e \u0440\u0430\u0431\u043e\u0442"),r.a.createElement("div",null,r.a.createElement(le.a,{name:"category",component:"select"},r.a.createElement("option",null),t&&t.length>0&&t.map((function(e){return n&&n.category===e.ru_name?r.a.createElement("option",{defaultValue:e.id,key:e.id},e.ru_name):r.a.createElement("option",{value:e.id,key:e.id},e.ru_name)}))))),r.a.createElement("div",null,r.a.createElement("label",null,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043e\u0431\u044a\u0435\u043c \u0438 \u0432\u0438\u0434\u044b \u0440\u0430\u0431\u043e\u0442"),r.a.createElement("div",null,r.a.createElement(le.a,{name:"description",component:"textarea",className:"form-control job-form-desc",placeholder:"\u041a\u0430\u043a\u0443\u044e \u0440\u0430\u0431\u043e\u0442\u0443 \u043d\u0443\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c? \r - \u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043f\u0438\u0441\u043e\u043a \u0440\u0430\u0431\u043e\u0442.\r - \u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043e\u0431\u044a\u0435\u043c \u0440\u0430\u0431\u043e\u0442\u044b \u0432 \u043a\u0432\u0430\u0434\u0440\u0430\u0442\u043d\u044b\u0445 \u043c\u0435\u0442\u0440\u0430\u0445, \u0448\u0442\u0443\u043a\u0430\u0445 \u0438\u043b\u0438 \u0432 \u0434\u0440\u0443\u0433\u043e\u0439 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0435\u0439 \u0435\u0434\u0438\u043d\u0438\u0446\u0435 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f.\r - \u041e\u043f\u0438\u0448\u0438\u0442\u0435 \u0432\u0430\u0448\u0438 \u043f\u043e\u0436\u0435\u043b\u0430\u043d\u0438\u044f \u0438 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f, \u0435\u0441\u043b\u0438 \u043e\u043d\u0438 \u0435\u0441\u0442\u044c.\r "}))),r.a.createElement("div",null,r.a.createElement("label",null,"\u041a\u043e\u0433\u0434\u0430 \u043d\u0443\u0436\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443?"),r.a.createElement("select",{onChange:a,name:"jobDate"},r.a.createElement("option",{defaultValue:"any"},"\u0412 \u043b\u044e\u0431\u043e\u0435 \u0432\u0440\u0435\u043c\u044f"),r.a.createElement("option",{value:"period"},"\u0412 \u043f\u0435\u0440\u0438\u043e\u0434"),r.a.createElement("option",{value:"not later"},"\u041d\u0435 \u043f\u043e\u0437\u0434\u043d\u0435\u0435, \u0447\u0435\u043c")),"period"==c&&r.a.createElement("div",null,r.a.createElement("label",null,"C"),r.a.createElement(le.a,{name:"start_date",component:"input",type:"date",placeholder:"",label:"C"}),r.a.createElement("label",null,"\u0414\u043e"),r.a.createElement(le.a,{name:"end_date",component:"input",type:"date",placeholder:"",label:"\u0414\u043e"})),"not later"==c&&r.a.createElement(le.a,{name:"end_date",component:"input",type:"date",placeholder:""})),r.a.createElement("div",null,r.a.createElement(le.a,{name:"budget",component:de,type:"number",placeholder:"",label:"\u0411\u044e\u0434\u0436\u0435\u0442 \u0434\u043e"})),r.a.createElement("div",null,r.a.createElement(le.a,{component:de,name:"address",type:"text",placeholder:"\u0423\u043b\u0430\u043d-\u0423\u0434\u044d",value:"\u0423\u043b\u0430\u043d-\u0423\u0434\u044d",label:"\u0410\u0434\u0440\u0435\u0441"})))}var pe=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Z.a)(this,a),(n=t.call(this,e)).state={jobDate:"any"},n.setData=n.setData.bind(Object(oe.a)(n)),n}return Object($.a)(a,[{key:"setData",value:function(e){this.setState(Object(ie.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.pristine,n=e.reset,c=e.submitting,o=e.user,s=e.categories;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement(le.a,{component:de,name:"name",type:"text",placeholder:"",value:o?o.nickname:"",defaultValue:o?o.nickname:"",label:"\u041a\u0430\u043a \u043a \u0432\u0430\u043c \u043e\u0431\u0440\u0430\u0449\u0430\u0442\u044c\u0441\u044f?"})),r.a.createElement("div",null,r.a.createElement(le.a,{name:"phone",component:de,type:"number",placeholder:"79148965232",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"})),r.a.createElement(be,{handleSubmit:t,pristine:a,reset:n,submitting:c,categories:s,setData:this.setData,job:null,jobDate:this.state.jobDate}),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",onClick:t,disabled:a||c},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))}}]),a}(n.Component);pe=Object(ue.a)({form:"jobFirstCreate"})(pe);var me=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Z.a)(this,a),(n=t.call(this,e)).state={jobDate:"any"},n.setData=n.setData.bind(Object(oe.a)(n)),n}return Object($.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.initialValues,t=e.start_date,a=e.end_date;t&&this.setState(Object(se.a)(Object(se.a)({},this.state),{},{jobDate:"period"})),a&&!t&&this.setState(Object(se.a)(Object(se.a)({},this.state),{},{jobDate:"not later"}))}},{key:"setData",value:function(e){this.setState(Object(ie.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.pristine,n=e.reset,c=e.submitting,o=e.categories,s=e.job;return r.a.createElement("div",null,r.a.createElement(be,{handleSubmit:t,pristine:a,reset:n,submitting:c,categories:o,setData:this.setData,job:s,jobDate:this.state.jobDate}),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",onClick:t,disabled:a||c},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))}}]),a}(n.Component);me=Object(ue.a)({form:"jobCreate"})(me);var ge=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Z.a)(this,a),(n=t.call(this,e)).state={jobDate:"any"},n.setData=n.setData.bind(Object(oe.a)(n)),n}return Object($.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.initialValues,t=e.start_date,a=e.end_date;t&&this.setState(Object(se.a)(Object(se.a)({},this.state),{},{jobDate:"period"})),a&&!t&&this.setState(Object(se.a)(Object(se.a)({},this.state),{},{jobDate:"not later"}))}},{key:"setData",value:function(e){this.setState(Object(ie.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.pristine,n=e.reset,c=e.submitting,o=e.categories,s=e.job;return r.a.createElement("div",null,r.a.createElement(be,{handleSubmit:t,pristine:a,reset:n,submitting:c,categories:o,setData:this.setData,job:s,jobDate:this.state.jobDate}),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",onClick:t,disabled:a||c},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),r.a.createElement("button",{className:"btn btn-primary",onClick:this.props.clickJobEdit,"data-id":null},"\u043d\u0430\u0437\u0430\u0434")))}}]),a}(n.Component);ge=Object(ue.a)({form:"jobUpdate"})(ge);var fe=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Z.a)(this,a),(n=t.call(this,e)).state={},n.submitCreateShop=n.submitCreateShop.bind(Object(oe.a)(n)),n}return Object($.a)(a,[{key:"componentDidMount",value:function(){this.props.getCategories()}},{key:"submitCreateShop",value:function(e){e.preventDefault(),this.props.createFirstJob(this.props.state.form.jobFirstCreate.values),this.props.history.push("/zakazchik/account/")}},{key:"render",value:function(){var e=this.props.user,t=this.props.state.jobs.categories;return e&&e.zakazchik?r.a.createElement(i.a,{to:{pathname:"/zakazchik/account/"}}):r.a.createElement("div",{className:"container-fluid shop-create"},r.a.createElement("h4",null,"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b. \u0421\u043b\u0438\u0437\u0430\u043d\u043e \u0441 \u0440\u0435\u043c\u043e\u043d\u0442\u043d\u0438\u043a\u0430."),r.a.createElement(pe,{shopName:"",shopPhone:"",shopInfo:"",handleSubmit:this.submitCreateShop,user:e,categories:t}))}}]),a}(n.Component),he=Object(l.b)((function(e){return{state:e,routing:e.routing,user:e.auth.user}}),(function(e){return{createFirstJob:function(t){return e(J.default.createFirstJobRequest(t))},getCategories:function(t){return e(J.default.getCategoriesRequest(t))}}}))(fe),Ee=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){return Object(Z.a)(this,a),t.apply(this,arguments)}return Object($.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.token;this.props.user||this.props.checkToken(e)}},{key:"render",value:function(){var e=!1;return!0===this.props.isLoggedIn&&(e=!0),r.a.createElement("div",null,e?r.a.createElement(ce,null):"\u041d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d")}}]),a}(n.Component),ve=Object(l.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,state:e}}),(function(e){return{checkToken:function(t){return e(_.default.checkTokenRequest(t))}}}))(Ee);function je(e){return r.a.createElement("div",{className:"modal fade",id:"authModal",tabIndex:"-1",role:"dialog","aria-labelledby":"authModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"authModalLabel"},"\u0412\u043e\u0439\u0442\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("a",{href:"viber://pa?chatURI=dm-eda&context=Chto_za_CONTEXT?&text=\u0432\u043e\u0439\u0442\u0438"},"\u0412\u043e\u0439\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 \u0432\u0430\u0439\u0431\u0435\u0440")))))}var Oe=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Z.a)(this,a),(n=t.call(this,e)).state={},n}return Object($.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.props.auth.user||this.props.checkToken(e)}},{key:"render",value:function(){var e=this.props.auth,t=e.isLoggedIn,a=e.user;return r.a.createElement("div",{className:"header"},r.a.createElement("h4",{className:"head-title"},r.a.createElement(s.b,{to:"/"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u0430")),t?a.zakazchik?r.a.createElement("div",null,r.a.createElement(s.b,{to:"/zakazchik/account/"},"\u041c\u043e\u0438 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f"),r.a.createElement("p",null,a.viber_name," ",r.a.createElement("button",{onClick:this.props.logout},"\u0412\u044b\u0439\u0442\u0438"))):r.a.createElement("div",null,r.a.createElement(s.b,{to:"/zakazchik/create_first/"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0431\u044c\u044f\u0432\u043b\u0435\u043d\u0438\u0435"),r.a.createElement("p",null,a.viber_name," ",r.a.createElement("button",{onClick:this.props.logout},"\u0412\u044b\u0439\u0442\u0438"))):r.a.createElement("div",null,r.a.createElement("button",{className:"btn","data-toggle":"modal","data-target":"#authModal"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0431\u044c\u044f\u0432\u043b\u0435\u043d\u0438\u0435"),r.a.createElement("button",{className:"btn","data-toggle":"modal","data-target":"#authModal"},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement(je,null),r.a.createElement("hr",null))}}]),a}(n.Component),ke=Object(l.b)((function(e){return{auth:e.auth,state:e}}),(function(e){return{checkToken:function(t){return e(_.default.checkTokenRequest(t))},logout:function(){return e(_.default.logoutRequest())}}}))(Oe);function Te(e){var t=e.job,a=e.jobEditId,n=e.categories,c=null;Object.keys(n).forEach((function(e){n[e]==t.category&&(c=e)}));var o=!1;return t.id==a&&(o=!0),r.a.createElement("div",null,o?r.a.createElement("div",null,r.a.createElement(ge,{categories:n,handleSubmit:e.clickEditDone,job:t,initialValues:{id:t.id,title:t.title,category:c,description:t.description,start_date:t.start_date,end_date:t.end_date,budget:t.budget,address:t.address},clickJobEdit:e.clickJobEdit})):r.a.createElement("div",{className:"job-block"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},r.a.createElement("a",{href:"",className:"job-title"},t.title)),r.a.createElement("div",{className:"col-4"},r.a.createElement("p",{className:"job-budget"},t.budget,"\u0440"))),r.a.createElement("p",{className:"job-description"},t.description),r.a.createElement("p",{className:"job-description"},t.category),r.a.createElement("p",{className:"job-address"},t.address),t.start_date?r.a.createElement("p",{className:"job-address"},"c ",t.start_date," \u0434\u043e ",t.end_date):t.end_date?r.a.createElement("p",{className:"job-address"},"\u0414\u043e ",t.end_date):r.a.createElement("p",{className:"job-address"},"\u0412 \u043b\u044e\u0431\u043e\u0435 \u0432\u0440\u0435\u043c\u044f"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("button",{className:"btn btn-primary","data-id":t.id,onClick:e.clickJobEdit},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c")),r.a.createElement("div",{className:"col-6"},r.a.createElement("button",{className:"btn btn-primary","data-id":t.id,onClick:e.clickDeactivate},"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043d\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0439")))))}var _e=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Z.a)(this,a),(n=t.call(this,e)).state={jobsEditList:[],jobEditId:null,needToRefresh:!1},n.clickJobEdit=n.clickJobEdit.bind(Object(oe.a)(n)),n.clickEditDone=n.clickEditDone.bind(Object(oe.a)(n)),n.clickDeactivate=n.clickDeactivate.bind(Object(oe.a)(n)),n.clickCreateNew=n.clickCreateNew.bind(Object(oe.a)(n)),n}return Object($.a)(a,[{key:"componentDidMount",value:function(){}},{key:"clickJobEdit",value:function(e){var t=e.target.dataset.id;this.setState(Object(se.a)(Object(se.a)({},this.state),{},{jobEditId:t}))}},{key:"clickEditDone",value:function(){var e=this.props.form.jobUpdate.values;this.props.partialUpdateJob(e),this.setState(Object(se.a)(Object(se.a)({},this.state),{},{jobEditId:null,needToRefresh:!0}))}},{key:"clickDeactivate",value:function(e){var t=e.target.dataset.id;this.props.activateDeactivateJob({id:t,active:!1}),this.setState(Object(se.a)(Object(se.a)({},this.state),{},{jobEditId:null,needToRefresh:!0}))}},{key:"clickCreateNew",value:function(){var e=this.props.form.jobCreate.values;this.props.createJob(e),this.setState(Object(se.a)(Object(se.a)({},this.state),{},{jobEditId:null,needToRefresh:!0}))}},{key:"refreshSowsList",value:function(){var e=this;!this.props.eventFetching&&this.state.needToRefresh&&setTimeout((function(){e.setState(Object(se.a)(Object(se.a)({},e.state),{},{needToRefresh:!1})),e.props.getJobs({zakazchik:e.props.user.id})}),10)}},{key:"render",value:function(){var e=this;this.refreshSowsList();var t=this.props,a=t.jobs,n=t.user,c=t.categories,o=this.state.jobEditId;return r.a.createElement("div",{className:""},a.length>0&&a.map((function(t){return r.a.createElement(Te,{job:t,jobEditId:o,clickJobEdit:e.clickJobEdit,clickEditDone:e.clickEditDone,clickDeactivate:e.clickDeactivate,categories:c,key:t.id})})),a.length<2&&n?r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("p",null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443"),r.a.createElement(me,{categories:c,handleSubmit:this.clickCreateNew,initialValues:{zakazchik:n?n.id:null,start_date:null,end_date:null,address:"\u0423\u043b\u0430\u043d-\u0423\u0434\u044d"}})):r.a.createElement("div",null,"\u0423 \u0432\u0430\u0441 \u0431\u043e\u043b\u044c\u0448\u0435 2\u0445 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u0440\u0430\u0431\u043e\u0442."))}}]),a}(n.Component),Je=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(Z.a)(this,a),(n=t.call(this,e)).state={},n.submitCreateShop=n.submitCreateShop.bind(Object(oe.a)(n)),n}return Object($.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("user_id");this.props.getJobs({zakazchik:e})}},{key:"submitCreateShop",value:function(e){e.preventDefault(),this.props.createFirstJob(this.props.state.form.jobCreate.values)}},{key:"render",value:function(){var e=this.props.user,t=this.props.state.jobs,a=t.categories,n=t.jobs,c=this.props.state.jobs.listFetching;return r.a.createElement("div",{className:"container-fluid shop-create"},r.a.createElement("h4",null,"\u041a\u0430\u0431\u0438\u043d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430"),c?r.a.createElement("p",null,"Loading"):r.a.createElement(_e,{user:e,form:this.props.form,categories:a,eventFetching:this.props.state.jobs.eventFetching,jobs:n,getJobs:this.props.getJobs,partialUpdateJob:this.props.partialUpdateJob,activateDeactivateJob:this.props.activateDeactivateJob,createJob:this.props.createJob}))}}]),a}(n.Component),ye=Object(l.b)((function(e){return{state:e,routing:e.routing,user:e.auth.user,jobs:e.jobs.jobs,form:e.form}}),(function(e){return{createFirstJob:function(t){return e(J.default.createFirstJobRequest(t))},partialUpdateJob:function(t){return e(J.default.partialUpdateJobRequest(t))},activateDeactivateJob:function(t){return e(J.default.activateDeactivateJobRequest(t))},getJobs:function(t){return e(J.default.getJobsRequest(t))},createJob:function(t){return e(J.default.createJobRequest(t))},checkToken:function(t){return e(_.default.checkTokenRequest(t))}}}))(Je),Se=function(e){var t=Object(b.a)(),a=Object(u.createStore)(Y,Object(d.composeWithDevTools)(Object(u.applyMiddleware)(t)));t.run(H);return a}();o.a.render(r.a.createElement(l.a,{store:Se},r.a.createElement(s.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(ke,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/"},r.a.createElement(ce,null)),r.a.createElement(i.b,{path:"/zakazchik/create_first/",component:he}),r.a.createElement(i.b,{path:"/zakazchik/account/",component:ye}),r.a.createElement(i.b,{path:"/dm/login/v/:token",component:ve})),r.a.createElement("div",{className:"footer"},r.a.createElement("p",{className:"foot-title"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u0430"))))),document.getElementById("root"))},8:function(e,t,a){"use strict";a.r(t),a.d(t,"JobsTypes",(function(){return d})),a.d(t,"INITIAL_STATE",(function(){return b})),a.d(t,"JobsSelectors",(function(){return p})),a.d(t,"getJobsRequest",(function(){return m})),a.d(t,"getJobsSuccess",(function(){return g})),a.d(t,"getJobsFail",(function(){return f})),a.d(t,"getJobDetailRequest",(function(){return h})),a.d(t,"getJobDetailSuccess",(function(){return E})),a.d(t,"getJobDetailFail",(function(){return v})),a.d(t,"getCategoriesRequest",(function(){return j})),a.d(t,"getCategoriesSuccess",(function(){return O})),a.d(t,"getCategoriesFail",(function(){return k})),a.d(t,"createFirstJobRequest",(function(){return T})),a.d(t,"createFirstJobSuccess",(function(){return _})),a.d(t,"createFirstJobFail",(function(){return J})),a.d(t,"partialUpdateJobRequest",(function(){return y})),a.d(t,"partialUpdateJobSuccess",(function(){return S})),a.d(t,"partialUpdateJobFail",(function(){return C})),a.d(t,"activateDeactivateJobRequest",(function(){return D})),a.d(t,"activateDeactivateJobSuccess",(function(){return F})),a.d(t,"activateDeactivateJobFail",(function(){return I})),a.d(t,"createJobRequest",(function(){return R})),a.d(t,"createJobSuccess",(function(){return N})),a.d(t,"createJobFail",(function(){return A})),a.d(t,"reducer",(function(){return L}));var n,r=a(7),c=a(46),o=a(69),s=a.n(o),i=Object(c.createActions)({getJobsRequest:["payload"],getJobsFail:["payload"],getJobsSuccess:["payload"],getJobDetailRequest:["payload"],getJobDetailFail:["error"],getJobDetailSuccess:["payload"],getCategoriesRequest:["payload"],getCategoriesFail:["payload"],getCategoriesSuccess:["payload"],createFirstJobRequest:["payload"],createFirstJobFail:["payload"],createFirstJobSuccess:["payload"],partialUpdateJobRequest:["payload"],partialUpdateJobFail:["payload"],partialUpdateJobSuccess:["payload"],activateDeactivateJobRequest:["payload"],activateDeactivateJobFail:["payload"],activateDeactivateJobSuccess:["payload"],createJobRequest:["payload"],createJobFail:["payload"],createJobSuccess:["payload"]}),l=i.Types,u=i.Creators,d=l;t.default=u;var b=s()({listFetching:!1,jobs:[],categories:[],errorList:null,detailFetching:null,jobDetail:null,errorDetail:null,eventFetching:null,message:""}),p={getJobs:function(e){return e.jobs.job_list},getCategories:function(e){return e.jobs.categories},createJob:function(e){return e.jobs.jobDetail}},m=function(e,t){t.payload;return e.merge({listFetching:!0,jobs:[]})},g=function(e,t){var a=t.payload;return e.merge({listFetching:!1,errorList:null,jobs:a.results,categories:a.categories})},f=function(e,t){var a=t.payload;return e.merge({listFetching:!1,errorList:a,jobs:[]})},h=function(e,t){t.payload;return e.merge({detailFetching:!0})},E=function(e,t){var a=t.payload;return e.merge({detailFetching:!1,errorDetail:null,jobDetail:a})},v=function(e,t){var a=t.error;return e.merge({detailFetching:!1,errorDetail:a,jobDetail:null})},j=function(e,t){t.payload;return e.merge({listFetching:!0,categories:[]})},O=function(e,t){var a=t.payload;return e.merge({listFetching:!1,errorList:null,categories:a})},k=function(e,t){var a=t.payload;return e.merge({listFetching:!1,errorList:a,categories:[]})},T=function(e,t){t.payload;return e.merge({eventFetching:!0,message:""})},_=function(e,t){var a=t.payload;return e.merge({eventFetching:!1,errorList:null,message:a.message})},J=function(e,t){var a=t.payload;return e.merge({eventFetching:!1,errorList:a,message:""})},y=function(e,t){t.payload;return e.merge({eventFetching:!0,message:""})},S=function(e,t){var a=t.payload;return e.merge({eventFetching:!1,errorList:null,message:a.message})},C=function(e,t){var a=t.payload;return e.merge({eventFetching:!1,errorList:a,message:""})},D=function(e,t){t.payload;return e.merge({eventFetching:!0,message:""})},F=function(e,t){var a=t.payload;return e.merge({eventFetching:!1,errorList:null,message:a.message})},I=function(e,t){var a=t.payload;return e.merge({eventFetching:!1,errorList:a,message:""})},R=function(e,t){t.payload;return e.merge({eventFetching:!0,message:""})},N=function(e,t){var a=t.payload;return e.merge({eventFetching:!1,errorList:null,message:a.message,jobDetail:a.job})},A=function(e,t){var a=t.payload;return e.merge({eventFetching:!1,errorList:a,message:""})},L=Object(c.createReducer)(b,(n={},Object(r.a)(n,l.GET_JOBS_REQUEST,m),Object(r.a)(n,l.GET_JOBS_SUCCESS,g),Object(r.a)(n,l.GET_JOBS_FAIL,f),Object(r.a)(n,l.GET_JOB_DETAIL_REQUEST,h),Object(r.a)(n,l.GET_JOB_DETAIL_SUCCESS,E),Object(r.a)(n,l.GET_JOB_DETAIL_FAIL,v),Object(r.a)(n,l.GET_CATEGORIES_REQUEST,j),Object(r.a)(n,l.GET_CATEGORIES_SUCCESS,O),Object(r.a)(n,l.GET_CATEGORIES_FAIL,k),Object(r.a)(n,l.CREATE_FIRST_JOB_REQUEST,T),Object(r.a)(n,l.CREATE_FIRST_JOB_SUCCESS,_),Object(r.a)(n,l.CREATE_FIRST_JOB_FAIL,J),Object(r.a)(n,l.PARTIAL_UPDATE_JOB_REQUEST,y),Object(r.a)(n,l.PARTIAL_UPDATE_JOB_SUCCESS,S),Object(r.a)(n,l.PARTIAL_UPDATE_JOB_FAIL,C),Object(r.a)(n,l.ACTIVATE_DEACTIVATE_JOB_REQUEST,D),Object(r.a)(n,l.ACTIVATE_DEACTIVATE_JOB_SUCCESS,F),Object(r.a)(n,l.ACTIVATE_DEACTIVATE_JOB_FAIL,I),Object(r.a)(n,l.CREATE_JOB_REQUEST,R),Object(r.a)(n,l.CREATE_JOB_SUCCESS,N),Object(r.a)(n,l.CREATE_JOB_FAIL,A),n))}},[[141,1,2]]]);
//# sourceMappingURL=main.b9aeb55f.chunk.js.map